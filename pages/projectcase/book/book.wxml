<!--pages/test/book.wxml-->
<wxs src="./book.wxs" module="bookUtil" />
<view class='out-content mg-b head-padding'>
  <view class='flex-c fx-d-col '>
    <image class='info-img head-p' src='{{customerInfo.logo}}' ></image>
 <!-- class='flex-c c-p-d p-b b-s w-10 mg-b {{oAppointment.status!=1?"":"hide"}}'  -->
    <view  class='text-head f-16 {{customerInfo.name?"":"hide"}}'>{{customerInfo.name}}     （{{customerInfo.wxNickname}}） </view>
    <view  class='text-head f-16 {{customerInfo.name?"hide":""}}'>{{customerInfo.wxNickname}} </view>
  </view>
</view>
<!-- 已关闭提示 -->
 <view class=" tipunable" style="display: {{isShow?'block':'none'}}"> 已关闭用户不可以预约！</view>

<!-- 预约项目和时间 -->
<view class='out-content mg-b'>
  <view class='flex-c fx-d-col'>
    <view class='f-16 mg-b' >预约项目</view>
    <view class='flex-c fx-d-row w-10 mg-b product '>
      <!-- <view wx-for="{{arrData}}" wx:for-item="sitem" wx:key="id" class=' pro-b'>{{sitem.iname}}aaa<image class='pro-icon' src='../../../public/images/bookdeletepro.png' ></image>
      </view> -->
      <view wx:for="{{arrData}}" wx:for-item="oitem1" wx:key="id">
        <view  class='pro-b'  >{{oitem1.iname}}<image data-id='{{oitem1.itemid}}' data-name='{{oitem1.iname}}'  class='pro-icon {{status!=1?"":"hide"}}'    src='../../../public/images/bookdeletepro.png' bindtap='deletepro' ></image>
        <!-- <image data-id='{{oitem1.itemid}}' data-name='{{oitem1.iname}}'  class='pro-icon {{status==1?"":"hide"}}'    src='../../../public/images/bookdeletepro.png' bindtap='' ></image> -->
        </view></view>
      </view> 
      <!-- 打开项目列表 -->
    <view bindtap='showproduct' class='f-16 add-pro {{status!=1?"":"hide"}} ' ><image class='proadd-icon' src='../../../public/images/bookaddicon.png' ></image></view>
     <!-- <view bindtap='' class='f-16 add-pro {{status==1?"":"hide"}} ' ><image class='proadd-icon' src='../../../public/images/bookaddicon.png' ></image></view> -->
  </view> 


  <view class='flex-c fx-d-col fx-jc-sb c-p-d '>
   <view class='f-16 mg-b' >预约时间</view>
   <view class='flex  {{status!=1?"":"hide"}}'>
     <picker  mode="date" value="{{bdate}}" start="{{clueStartDate}}"   bindchange="bindDateChange">
       <view class="f-16 b-t  pickerd pkdate">
         {{bdate}}
       </view>
    </picker>

    <picker placeholder="qingxuanzhe" mode="time" value="{{btime}}"  bindchange="bindTimeChange">
       <view class="f-16  b-t pickert">
        {{btime}}
       </view>
    </picker>
   </view>
   <view class='flex  {{status==1?"":"hide"}}'>
     
       <view class="f-16 b-t  pickerd pkdate">
         {{bdate}}
       </view>
    

    
       <view class="f-16  b-t pickert">
        {{btime}}
       </view>
    
   </view>
  </view>
</view>

<!-- 顾客信息 -->
<view class='out-content'>
  <view class='flex custmerinfo-name fx-jc-sb c-p-d  b-g'>
    <view class='f-16 ' maxlength="6" size="6">顾客姓名</view>
    <view class='f-16 custmerinfo-input {{status!=1?"":"hide"}}'>
     <input name='name ' class='t-l' value='{{customerInfo.name}}'   bindblur='fInputName'  placeholder='{{}}'></input>
    </view>
     <view class='f-16  custmerinfo-input {{status==1?"":"hide"}}' style="width:360rpx">
     <view name='clueRemark ' class='t-l' value='{{customerInfo.name}}'   bindblur='fInputName' >{{customerInfo.name}}</view>
    </view>
   </view>

  <view class='flex custmerinfo-name fx-jc-sb c-p-d mg-b b-g'>
      <view class='f-16 ' >手机号码</view>
      <view class='f-16 custmerinfo-input  {{status!=1?"":"hide"}}'>
          <input name='phoneNum' class='t-l ' value='{{customerInfo.phoneNum}}' bindtap='showphone' bindblur='fInputMobile'  
          placeholder='{{}}'></input>
      </view>
       <view class='f-16  custmerinfo-input {{status==1?"":"hide"}}' style="width:360rpx">
          <view  class='t-l ' style="t" >{{customerInfo.phoneNum}}</view>
      </view>
  </view>
<!-- 手机号联想 -->
  <!-- <view class='phoneNumadd f-14' hidden="{{showphone}}" >
    <view bindtap='selectphone'>18811795986</view>
    <view >18811795984</view>
    <view>18811795983</view>
  </view> -->

  <view class='flex custmerinfo-name fx-jc-sb c-p-d  mg-b' >
    
       <view class='f-16  ' >线索备注</view>
          <view class='f-16   {{status!=1?"":"hide"}}' style='positin:absolute;z-index:1'>
            <view class='{{showtextarea?"":"hide"}}'>
             <textarea style="width:450rpx;height:160rpx;" name='clueRemark' class='t-l ' value='{{clueRemark}}' maxlength="140" bindtap='' bindblur='fInputClueRemark'  
        placeholder='{{}}'></textarea>
            </view>
       
         </view>
          <view style="width:460rpx;height:160rpx" class='f-16   {{status==1?"":"hide"}} ' >
       <view  class='t-l ' style="t" >{{clueRemark}}</view>
         </view>
      </view>
   
</view>

<!-- 预约按钮 -->
<view class='flex-c c-p-d p-b b-s w-10 {{oAppointment.status!=1?"":"hide"}}' >
   <view class='sb-btn  t-a-c b-s' style='' bindtap='fSubmitData'> 预约</view> 
</view>

<view class='flex-c p-b c-p-d b-s w-10  {{oAppointment.status==1?"":"hide"}}'>
   <view class='dis-c  sb-btn t-a-c b-s'  style=''> 预约</view> 
</view>

<!-- 弹出项目 -->

<view class='modal-box {{projectItems.length>0?"":"hide"}}' hidden="{{showpro}}" bindtap="">
  <view class="modal-body">
    <view class="modal-content">
        <!-- <view class=' case-item-detail'>
    <view wx:for="{{testlist}}" wx:for-item="oitem" wx:key="id">
        <text class='case-item {{jSelect.includes(oitem.id)?"case-sele":""}}'  bindtap='selectTitle'>{{oitem.name}}</text></view>
    </view>  -->
    <view class='case-content'>
  <block wx:for="{{projectItems}}" wx:for-item="oitem" wx:key="id">
    <view class='o-flex case-item-content'>
      <text class='case-title' bindtap='selectTitle'>{{oitem.productName}}</text>
      <view class='case-item-detail'>
        <block wx:for="{{oitem.productList}}" wx:for-item="secitem" wx:key="id">
          <block wx:for="{{secitem.productList}}" wx:for-item="item" wx:key="id">
            <!-- {{jSelect==item.productCode?"case-sele":""}} {{projectcase.inArray(jSelect,item.productCode)?"case-sele":""}}-->
            <!-- {{item.productCode}}  -->
            <text class='case-item  {{bookUtil.inArray(sSelect,item.productCode)?"case-sele":""}}' data-itemid='{{item.productCode}}' data-iname='{{item.productName}}' bindtap='selectItem'>{{item.productName}}</text>
          </block>
        </block>
      </view>
    </view>
  </block>
    <view class='b-pos' style=''>
     </view>
     <view style="text-align:center; margin-top:20px;">
           <span class="selend {{isactive?'active':''}} " size="mini" bindtap="selectItems">选好了</span>
      </view>
       <view style='height:160rpx'></view> 
      </view>

         
      </view>
   </view>
</view>  


<view class='modal-box {{projectItems.length<=0?"":"hide"}}' hidden="{{showpro}}" bindtap="">
<view>
    <div class="list-none">
      <div class="list-none-div">
       <image style="vertical-align:middle;" class='nodata-img' src='../../../public/images/no_data.png'></image>
      </div>
      
    </div>
</view>
</view>
 <!-- <view>
   <view wx:for="{{testlist}}" wx:for-item="oitem" wx:key="id">
        <text class=' {{jSelect.includes(oitem.id)?"case-sele":""}}'  bindtap='selectTitle'>{{oitem.name}}</text></view>
  </view>  -->
  <!-- 列表{{getClass(oitem)}} -->
   <!-- <view>
   <view wx:for="{{testlist}}" wx:for-item="oitem" wx:key="id">
        <text data-id='{{oitem.id}}' data-name='{{oitem.name}}' data-show='{{oitem.show}}'  class='{{bookUtil.eventColor(oitem,testlisted)}}'  bindtap='selectpro'  >{{oitem.name}}</text></view>
  </view>  -->
  