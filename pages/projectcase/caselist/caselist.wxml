<wxs src="../../../utils/wxs/cutil.wxs" module="cutil" />
<wxs src="./caselist.wxs" module="caselist" />
<view class="topshow clearfix">
  <!--项目滚动区  -->
  <view class="scroll-box fl">
    <scroll-view scroll-x="true" style=" white-space: nowrap;">
      <view class="item-view f-14" style="color:{{item.changeColor}} " wx:for-item="item"  wx:for="{{arrData}}"  wx:key="item.itemid" data-itemid="{{item.itemid}}" data-paid="{{item.paid}}" data-iname="{{item.iname}}" data-paname="{{item.paname}}" bindtap="chooseitem">{{item.iname}}</view>
      <!-- <view class="item-view f-14" bindtap="">热门项目</view>-->
    </scroll-view>
  </view>
  <!--下拉箭头  -->
  <view class="selectarrow fr ">
    <image src='../../../public/images/arrow-down.png' class='btn-down' bindtap="getproductitem"></image>
  </view>
</view>
<view class='o-flex o-content'>
  <!-- <view class='o-title w-10'>
    <text class='{{isConsult?"show":"hide"}}'>{{projectName}}</text>
  </view> -->
  <view class='o-project w-10'>
    <swiper indicator-dots="{{indicatorDots}}" class="o-swiper" style='' autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" bindchange="fSwiperChange">
      <block wx:for="{{caseList}}" wx:for-item="oitem" wx:key="id">
        <swiper-item>
          <view class='o-item'>
            <view class='w-10'>
              <view>
                <view class='flex b-s' style="position: relative;">
                  <text class='before f-12 bcommon'>术前</text>
                  <text class='after f-12 bcommon'>术后</text>
                  <image src='{{oitem.beforePicture.url||"../../../public/images/bk-photo.png"}}' mode='aspectFill' data-uid='{{oitem.id}}' bindtap='fCaseDetail' class='cmp-img b-s cmp-l'></image>
                  <image src='{{oitem.afterPicture.url||"../../../public/images/bk-photo.png"}}' mode='aspectFill' data-uid='{{oitem.id}}' bindtap='fCaseDetail' class='cmp-img b-s cmp-r'></image>
                </view>
              </view>

              <view class='user-info' bindtap='fCaseDetail'>
                <view class='bef-aft flex'>
                  <image class='o-img-title' src='{{oitem.customerLogo.url}}' mode='scaleToFill'></image>

                </view>
                <view class='u-info'>
                  <text class='u-name'>{{oitem.customerName}}</text>
                  <text class='f-14 txt-item' style='margin-left:-20rpx'>{{oitem.caseName}}</text>
                  <text class='f-14'>诊疗于 {{cutil.formatTime(oitem.operationDate,"yyyy-MM-dd")}}</text>

                </view>
              </view>
            </view>
            <view style="padding:5px 15px 0 10px;">
              <view>
                <text class='f-14 txt-item hide'>{{oitem.caseName}}</text>
              </view>
              <view class='flex mg-b ho-info'>
                <image class='u-icon' src='../../../public/images/icon-hos.png' mode='scaleToFill'></image>
                <text class='f-14 u-local mg-l'> {{oitem.clinic.name}}</text>
              </view>

            </view>
            <view style='padding-right:10px;'>
              <view class="flex fx-jc-ed">
                <view class='flex-c txt-item b-s' bindtap='fChangeShare' data-indexi='{{index}}' data-itemid='{{oitem.id}}' style='display:{{isConsult?"show":"none"}};'>
                  <image wx:if='{{oitem.current==oitem.id}}' src='../../../public/images/icon-ashare.png' class='share-icon'></image>
                  <image wx:if='{{oitem.current!=oitem.id}}' src='../../../public/images/icon-rshare.png' class='share-icon'></image>
                  <text class='f-14'>加入分享</text>
                </view>
              </view>
            </view>
          </view>
        </swiper-item>
      </block>
    </swiper>
  </view>
  <view class='extr-v' style=''></view>
  <view class='extr-v extr-b' style=''></view>
  <button class='share-btn flex-c' wx:if='{{aCaseIds.length>0}}' style='display:{{isConsult?"flex":"none"}};' open-type="share">
    <image src='../../../public/images/icon-share.png' class='share-icon'></image>
    <text class='share-txt'>分享给好友 </text>
    <text class='tip' wx:if='{{aCaseIds.length>0}}'>{{aCaseIds.length}}</text>
  </button>

   <button class='share-btn flex-c' wx:if='{{aCaseIds.length<=0}}' style='background-color:#999999;display:{{isConsult?"flex":"none"}};'>
    <image src='../../../public/images/icon-share.png' class='share-icon'></image>
    <text class='share-txt'>分享给好友</text>
    <text class='tip' wx:if='{{aCaseIds.length>0}}'>{{aCaseIds.length}}</text>
  </button> 

  <!-- 案例选项弹层 -->
  <!-- {{isshow?'block':'none'}} -->
  <!-- <view class='case-content' style="display: {{isShow?'block':'none'}}">
    <block wx:for="{{projectItems}}" wx:for-item="oitem" wx:key="id">
      <view class='.o-flex-t case-item-content'>
        <text class='case-title' bindtap='selectTitle'>{{oitem.productName}}</text>
        <view class='case-item-detail'>
          <block wx:for="{{oitem.productList}}" wx:for-item="secitem" wx:key="id">
            <block wx:for="{{secitem.productList}}" wx:for-item="item" wx:key="id">          
              <text class='case-item  {{caselist.inArray(sSelect,item.productCode)?"case-sele":""}}' data-paid='{{item.parentCode}}' data-paname='{{oitem.productName}}' data-itemid='{{item.productCode}}' data-iname='{{item.productName}} ' bindtap="selectItem"  >{{item.productName}} </text>
            </block>
          </block>  
        </view>
      </view>
      </block>
      <view style="text-align:center; margin-top:20px;">
        <span class=" {{isactive?'active':''}} " size="mini" bindtap="selectItems">选好了</span>
      </view>

  </view> -->
  <view class='case-content' style="display: {{ishow?'block':'none'}}">
  <block wx:for="{{projectItems}}" wx:for-item="oitem" wx:key="id">
    <view class='o-flex case-item-content'>
      <text class='case-title' bindtap='selectTitle'>{{oitem.productName}}</text>
      <view class='case-item-detail'>
        <block wx:for="{{oitem.productList}}" wx:for-item="secitem" wx:key="id">
          <block wx:for="{{secitem.productList}}" wx:for-item="item" wx:key="id">
            <!-- {{jSelect==item.productCode?"case-sele":""}} {{projectcase.inArray(jSelect,item.productCode)?"case-sele":""}}-->
            <!-- {{item.productCode}}  -->
            <text class='case-item  {{caselist.inArray(sSelect,item.productCode)?"case-sele":""}} {{caselist.inArray(selable,item.productCode)?"":"unable"}}' data-paid='{{item.parentCode}}' data-paname='{{oitem.productName}}' data-itemid='{{item.productCode}}' data-iname='{{item.productName}}' bindtap='selectItem'>{{item.productName}}</text>
          </block>
        </block>
      </view>
    </view>
  </block>
  <text class=" tipunable" style="display:{{isShow=='true'?'block':'none'}}"> 当前项目下暂时无案例可选</text> 
  <view style="text-align:center; margin-top:20px;" class="selBtn">
    <span class="selend {{isactive?'active':''}} " size="mini" bindtap="selectItems">选好了</span>
  </view>
</view>

</view>